<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>🗂️ 상담봇 EDA 대시보드 (민간 데이터)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        font-family: "Inter", "Noto Sans KR", sans-serif;
        background-color: #f8f7f4;
      }
      .chart-container {
        position: relative;
        width: 100%;
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;
        height: 320px;
        max-height: 350px;
      }
      @media (max-width: 768px) {
        .chart-container {
          height: 280px;
        }
      }
      .nav-item {
        transition: all 0.2s ease;
      }
      .nav-item:hover {
        background-color: #eef2ff;
        color: #4338ca;
      }
      .nav-item.active {
        background-color: #4f46e5;
        color: white;
        font-weight: 600;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }
      /* Hide scrollbar for Chrome, Safari and Opera */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      /* Hide scrollbar for IE, Edge and Firefox */
      .no-scrollbar {
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
      }
      .stat-card {
        background-color: white;
        border-radius: 0.75rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        padding: 1.5rem;
        transition: all 0.3s ease;
      }
      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }
    </style>
  </head>
  <body class="text-gray-800">
    <div class="flex flex-col md:flex-row min-h-screen">
      <nav class="md:w-64 bg-white p-4 md:p-6 shadow-lg md:min-h-screen shrink-0">
        <h1 class="text-2xl font-bold text-indigo-700 mb-6">🗂️ EDA 대시보드</h1>
        <ul class="space-y-2">
          <li>
            <a
              href="#home"
              class="nav-item flex items-center p-3 rounded-lg text-gray-700 active"
              onclick="showPage('home', this)"
            >
              <svg class="w-5 h-5 mr-3 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
              개요
            </a>
          </li>
          <li>
            <a
              href="#distribution"
              class="nav-item flex items-center p-3 rounded-lg text-gray-700"
              onclick="showPage('distribution', this)"
            >
              <svg class="w-5 h-5 mr-3 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path></svg>
              분포 분석
            </a>
          </li>
          <li>
            <a
              href="#vocabulary"
              class="nav-item flex items-center p-3 rounded-lg text-gray-700"
              onclick="showPage('vocabulary', this)"
            >
              <svg class="w-5 h-5 mr-3 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg>
              어휘 분석
            </a>
          </li>
          <li>
            <a
              href="#tasks"
              class="nav-item flex items-center p-3 rounded-lg text-gray-700"
              onclick="showPage('tasks', this)"
            >
              <svg class="w-5 h-5 mr-3 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
              태스크 심층 분석
            </a>
          </li>
          <li>
            <a
              href="#strategy"
              class="nav-item flex items-center p-3 rounded-lg text-gray-700"
              onclick="showPage('strategy', this)"
            >
              <svg class="w-5 h-5 mr-3 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707m12.728 0l-.707-.707M12 21v-1m0-16a1 1 0 00-1 1v1a1 1 0 002 0V4a1 1 0 00-1-1z"></path></svg>
              구현 전략
            </a>
          </li>
        </ul>
      </nav>

      <main class="flex-1 p-6 md:p-10 overflow-auto no-scrollbar">
        <section id="page-home" class="page-content">
          <h2 class="text-3xl font-bold text-gray-900 mb-6">💡 Executive Summary (민간 데이터)</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="stat-card">
              <div class="text-sm font-medium text-gray-500">원본 대화 (Unique)</div>
              <div class="text-3xl font-bold text-indigo-600">9,710<span class="text-xl ml-1">건</span></div>
              <div class="text-sm text-gray-500"></div>
            </div>
            <div class="stat-card">
              <div class="text-sm font-medium text-gray-500">총 라벨링 (Train)</div>
              <div class="text-3xl font-bold text-indigo-600">105,966<span class="text-xl ml-1">건</span></div>
              <div class="text-sm text-gray-500"></div>
            </div>
            <div class="stat-card">
              <div class="text-sm font-medium text-gray-500">데이터 품질</div>
              <div class="text-3xl font-bold text-green-600">우수</div>
              <div class="text-sm text-gray-500">결측치 없음 (dropna 적용)</div>
            </div>
            <div class="stat-card bg-indigo-600 text-white">
              <div class="text-sm font-medium text-indigo-200">핵심 활용</div>
              <div class="text-2xl font-bold">생성형 Q&A</div>
              <div class="text-sm text-indigo-100"> 69.0%가 Abstractive</div>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-1 stat-card">
              <h3 class="text-xl font-semibold text-gray-900 mb-4">1.1 라벨링 데이터 규모 (학습)</h3>
              <div class="chart-container" style="height: 250px; max-height: 250px">
                <canvas id="chartDataScale"></canvas>
              </div>
              <ul class="mt-4 space-y-2 text-sm text-gray-700">
                <li class="flex justify-between items-center">
                  <span class="flex items-center"><span class="w-3 h-3 rounded-full bg-blue-500 mr-2"></span>분류 (Class)</span>
                  <span class="font-bold">48,877 건</span>
                </li>
                <li class="flex justify-between items-center">
                  <span class="flex items-center"><span class="w-3 h-3 rounded-full bg-teal-500 mr-2"></span>요약 (Summary)</span>
                  <span class="font-bold">31,957 건</span>
                </li>
                <li class="flex justify-between items-center">
                  <span class="flex items-center"><span class="w-3 h-3 rounded-full bg-indigo-500 mr-2"></span>질의응답 (Q&A)</span>
                  <span class="font-bold">25,132 건</span>
                </li>
              </ul>
            </div>

            <div class="lg:col-span-2 stat-card">
              <h3 class="text-xl font-semibold text-gray-900 mb-4">1.3 분석 대상 선정 이유</h3>
              <div class="p-4 bg-yellow-50 border border-yellow-300 rounded-lg">
                <p class="font-semibold text-yellow-800">
                  결론: 이 프로젝트의 목적은 LLM을 Fine-tuning하는 것이며, 이를 위해서는 'Instruction(지시)'과 'Output(결과)' 쌍으로 이루어진 "라벨링 데이터"가 필수적이기 때문입니다.
                </p>
              </div>
              <div class="mt-4 space-y-3 text-gray-700">
                <p>
                  <strong class="text-gray-900">'원본 대화 (Source)'</strong>는 단순히 고객과 상담사의 대화 로그(`content`)입니다. 이 자체만으로는 모델을 "어떻게" 학습시킬지 알 수 없습니다.
                </p>
                <p>
                  <strong class="text-gray-900">'라벨링 데이터 (Label)'</strong>는 이 원본 대화를 기반으로 `"Instruction(지시)"`과 `"Output(정답)"`을 가공한 **Fine-tuning 전용 데이터셋**입니다. (예: `Instruction`: "이 대화에서 고객이 원하는 것을 찾아", `Output`: "성인 2명, 아이 2명")
                </p>
                <p>
                  따라서 이번 EDA의 목적은 LLM을 훈련시키기 위한 **'Instruction Tuning'용 데이터의 특징'**을 파악하는 것이므로, 105,966건의 '라벨링 데이터'를 분석의 중심으로 삼았습니다.
                </p>
              </div>
              <hr class="my-4" />
              <h4 class="text-lg font-semibold text-gray-900 mb-2">1.4 데이터 로딩 이슈</h4>
              <p class="text-sm text-gray-700">
                Colab-Drive 환경에서 한글 파일 이름이 **유니코드 NFD(자모 분리)** 방식으로 저장되어, Python이 파일 필터링에 실패하는 문제를 `unicodedata.normalize('NFC', ...)`로 해결했습니다.
              </p>
            </div>
          </div>
        </section>

        <section id="page-distribution" class="page-content hidden">
          <h2 class="text-3xl font-bold text-gray-900 mb-6">📊 데이터 분포 분석 (대화 원본)</h2>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="stat-card">
              <h3 class="text-xl font-semibold text-gray-900 mb-4">2.1 데이터 출처 (Source)</h3>
              <div class="chart-container">
                <canvas id="chartDataSource"></canvas>
              </div>
              <p class="mt-4 text-sm text-gray-700">
                <strong class="text-red-600">인사이트:</strong> '하나카드' (~5.8k), '엘지유플러스' (~3.2k)가 전체의 대부분을 차지합니다. **금융/통신 도메인**에 집중되어 있습니다. '액티벤처'는 상대적으로 적습니다.
              </p>
            </div>
            <div class="stat-card">
              <h3 class="text-xl font-semibold text-gray-900 mb-4">2.2 상담 카테고리 (Top 10)</h3>
              <div class="chart-container">
                <canvas id="chartDataCategory"></canvas>
              </div>
              <p class="mt-4 text-sm text-gray-700">
                <strong class="text-green-600">인사이트:</strong> '선결제/즉시출금', '이용내역 안내', '요금 안내' 등 명확한 **CS(고객 서비스) 업무**에 주제가 집중되어 있습니다.
              </p>
            </div>
            <div class="stat-card">
              <h3 class="text-xl font-semibold text-gray-900 mb-4">2.3 대화 턴(Turn) 수</h3>
              <div class="chart-container">
                <canvas id="chartDataTurns"></canvas>
              </div>
              <p class="mt-4 text-sm text-gray-700">
                <strong class="text-blue-600">인사이트:</strong> 평균 **37.5턴**이며, 99%의 대화가 **75턴** 이내입니다. 대화가 비교적 길게 이어지는 경향이 있습니다.
              </p>
            </div>
            <div class="stat-card">
              <h3 class="text-xl font-semibold text-gray-900 mb-4">2.3 대화 길이(글자 수)</h3>
              <div class="chart-container">
                <canvas id="chartDataLength"></canvas>
              </div>
              <p class="mt-4 text-sm text-gray-700">
                <strong class="text-blue-600">인사이트:</strong> 평균 **1330자**이며, 99%의 대화가 **2,318자** 이내입니다. 모델의 `max_length`를 **2048** (long-ke-t5 지원) 정도로 설정하는 것이 합리적입니다.
              </p>
            </div>
          </div>
        </section>

        <section id="page-vocabulary" class="page-content hidden">
          <h2 class="text-3xl font-bold text-gray-900 mb-6">🔬 핵심 어휘 분석 (대화 본문)</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="stat-card">
              <h3 class="text-xl font-semibold text-gray-900 mb-4">3.1 도메인 어휘</h3>
              <div class="space-y-4">
                <div>
                  <h4 class="font-bold text-indigo-600">💳 금융 (Finance)</h4>
                  <p class="text-sm text-gray-700 p-2 bg-indigo-50 rounded-md">
                    '카드', '결제', '금액', '한도', '은행', '계좌', '납부', '출금', '할인', '청구', '입금', '대출', '승인'
                  </p>
                </div>
                <div>
                  <h4 class="font-bold text-teal-600">📱 통신 (Telecom)</h4>
                  <p class="text-sm text-gray-700 p-2 bg-teal-50 rounded-md">
                    '요금', '요금제', '문자', '휴대폰', '데이터', '핸드폰', '해지', '약정', '정지', '인터넷', '통화'
                  </p>
                </div>
                <div>
                  <h4 class="font-bold text-blue-600">✈️ 여행/예약 (Travel/Booking)</h4>
                  <p class="text-sm text-gray-700 p-2 bg-blue-50 rounded-md">
                    '예약', '취소', '날짜' (상대적으로 빈도 낮음)
                  </p>
                </div>
              </div>
            </div>
            <div class="stat-card">
              <h3 class="text-xl font-semibold text-gray-900 mb-4">3.2 노이즈 어휘 (제거 대상)</h3>
              <p class="text-sm text-gray-600 mb-4">
                대화 내용과 무관한 화자(Speaker) 지칭어가 상위권을 차지했습니다. 이는 전처리 시 반드시 제거해야 합니다.
              </p>
              <div class="space-y-4">
                <div>
                  <h4 class="font-bold text-red-600">🚫 노이즈 단어</h4>
                  <p class="text-sm text-gray-700 p-2 bg-red-50 rounded-md">'담사'(170k), '손님'(122k)</p>
                </div>
                <div>
                  <h4 class="font-bold text-red-600">🚫 노이즈 태그</h4>
                  <p class="text-sm text-gray-700 p-2 bg-red-50 rounded-md">'고객:', '상담사:' (정규표현식으로 제거 필요)</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="page-tasks" class="page-content hidden">
          <h2 class="text-3xl font-bold text-gray-900 mb-6">🎯 Task별 심층 분석</h2>

          <div class="stat-card mb-6">
            <h3 class="text-2xl font-bold text-indigo-700 mb-4">4.1 질의응답 (Q&A) - ⭐️ 프로젝트의 핵심</h3>
            <div class="p-4 bg-indigo-50 border-l-4 border-indigo-500 rounded-r-lg mb-6">
              <p class="font-semibold text-indigo-800">
                결론: 이 태스크는 LLM에게 "주어진 맥락 내에서 사실을 찾아 짧게 생성"하도록 훈련시키는 'Instruction Tuning'용 데이터입니다.
              </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <div>
                <h4 class="text-lg font-semibold text-gray-900 mb-2">모델 유형 (가장 중요)</h4>
                <div class="chart-container" style="height: 250px; max-height: 250px">
                  <canvas id="chartQAType"></canvas>
                </div>
                <p class="mt-4 text-sm text-gray-700">
                  <strong class="text-red-600 text-base">발견:</strong> 답변의 **69.0%**가 원본에 없는 단어로 재구성된 **생성형(Abstractive)**이었습니다. (예: 원본 "만 오천 원입니다." → 답변 "15,000원"). 이는 `KoBERT-QA` 같은 추출형 모델로는 풀 수 없음을 의미합니다.
                </p>
              </div>

              <div>
                <h4 class="text-lg font-semibold text-gray-900 mb-2">Instruction (질문) 분석</h4>
                <p class="text-sm text-gray-700 mb-2">
                  <strong class="text-gray-900">발견:</strong> 사용자의 "자연어 질문"이 아닙니다. '언제', '얼마나'가 아닌, **'고객은', '고객이', '상담사는'** 등이 대부분입니다.
                </p>
                <p class="text-sm text-gray-700 p-3 bg-gray-100 rounded-lg">
                  <strong class="text-gray-900">해석:</strong> 이는 모델에게 "이 대화에서 '고객이' 한 말을 찾아"라고 지시하는 **Instruction(지시) 템플릿**입니다.
                </p>

                <h4 class="text-lg font-semibold text-gray-900 mt-6 mb-2">Output (답변) 분석</h4>
                <p class="text-sm text-gray-700 mb-2">
                  <strong class="text-gray-900">발견:</strong> "짧은 사실(Fact)"의 형태를 띱니다.
                </p>
                <p class="text-sm text-gray-700 p-3 bg-gray-100 rounded-lg">
                  <strong class="text-gray-900">근거:</strong> 평균 **14.1자**, 99%의 답변이 **54자** 이내입니다. (예: "성인 2명, 아이 2명")
                </p>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="stat-card">
              <h3 class="text-xl font-semibold text-gray-900 mb-4">4.2 분류 (Classification)</h3>
              <div class="chart-container" style="height: 300px; max-height: 300px">
                <canvas id="chartClass"></canvas>
              </div>
              <p class="mt-4 text-sm text-gray-700">
                <strong class="text-red-600">주의:</strong> **심각한 클래스 불균형(Imbalance)**이 존재합니다. '민원인'(9.4k), '단일 요건 민원'(8.1k), '만족'(7.9k) 등 특정 라벨이 압도적으로 많습니다. 이는 모델 학습 시 성능 저하의 주요 원인이 될 수 있습니다.
              </p>
            </div>
            <div class="stat-card">
              <h3 class="text-xl font-semibold text-gray-900 mb-4">4.3 요약 (Summarization)</h3>
              <div class="chart-container" style="height: 300px; max-height: 300px">
                <canvas id="chartSummary"></canvas>
              </div>
              <p class="mt-4 text-sm text-gray-700">
                <strong class="text-gray-900">해석:</strong> Q&A(평균 14자)보다 훨씬 긴 **평균 143자**의 길이를 가집니다. 99%가 416자 이내입니다. 전형적인 **추상적 요약(Abstractive Summarization)** 태스크입니다.
              </p>
            </div>
          </div>
        </section>

        <section id="page-strategy" class="page-content hidden">
          <h2 class="text-3xl font-bold text-gray-900 mb-6">🚀 결론: 구현 전략</h2>

          <div class="stat-card mb-6">
            <h3 class="text-xl font-semibold text-gray-900 mb-4">전략 1: 모델 선정 (Model Selection)</h3>
            <p class="text-gray-700">
              <strong class="text-indigo-600">방향:</strong> **Seq2Seq (Encoder-Decoder) 생성 모델**
            </p>
            <p class="mt-2 text-sm text-gray-600">
              <strong class="text-gray-800">근거:</strong> Q&A의 69.0%가 생성형(Abstractive)이었고, 요약 태스크 역시 생성형입니다. `KoBERT`나 `KoELECTRA` 같은 Encoder-only 모델은 이 문제를 풀 수 없습니다.
            </p>
            <p class="mt-2 text-sm text-gray-600">
              <strong class="text-gray-800">선정 모델:</strong> **KETI-AIR/long-ke-t5-base**. 2048 토큰 길이 지원으로 긴 대화(최대 2318자) 처리에 유리합니다.
            </p>
          </div>

          <div class="stat-card mb-6">
            <h3 class="text-xl font-semibold text-gray-900 mb-4">전략 2: 훈련 방식 (Training Strategy)</h3>
            <p class="text-gray-700">
              <strong class="text-indigo-600">방향:</strong> **멀티태스크 학습 (Multi-Task Learning)을 위한 프롬프트 엔지니어링**
            </p>
            <p class="mt-2 text-sm text-gray-600">
              <strong class="text-gray-800">근거:</strong> 동일한 원본 대화(content)에 대해 3가지 다른 레이블(Q&A, 분류, 요약)이 존재하므로 Multi-Task Learning에 완벽한 조건입니다.
            </p>
            <p class="mt-2 text-sm text-gray-600">
              <strong class="text-gray-800">구현:</strong> 모델이 3가지 임무를 구분하도록 **Prefix(접두사)**를 사용하여 입력 형식을 통일합니다.
            </p>

            <div class="overflow-x-auto mt-4">
              <table class="min-w-full divide-y divide-gray-200 border border-gray-200 rounded-lg">
                <thead class="bg-gray-100">
                  <tr>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Task</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Prefix (Prompt)</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">예시 Input</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">예시 Output</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                  <tr class="hover:bg-indigo-50">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-indigo-700">Q&A</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-mono">`Q&A:`</td>
                    <td class="px-6 py-4 text-sm text-gray-700 font-mono">`Q&A: [질문] content:...[대화]...`</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono"> `▲월 ▲일부터 ▲월 ▲일까지`</td>
                  </tr>
                  <tr class="hover:bg-indigo-50">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-teal-700">분류</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-mono">`classify:`</td>
                    <td class="px-6 py-4 text-sm text-gray-700 font-mono">`classify: content:...[대화]...`</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono"> `단일 요건 민원`</td>
                  </tr>
                  <tr class="hover:bg-indigo-50">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-700">요약</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-mono">`summarize:`</td>
                    <td class="px-6 py-4 text-sm text-gray-700 font-mono">`summarize: content:...[대화]...`</td>
                    <td class="px-6 py-4 text-sm text-gray-900 font-mono">`고객은 가족 여행으로...`</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="stat-card">
            <h3 class="text-xl font-semibold text-gray-900 mb-4">전략 3: 데이터 전처리 (Preprocessing)</h3>
            <ul class="list-disc list-outside space-y-2 pl-5 text-gray-700">
              <li>
                <strong class="text-gray-900">Noise 제거:</strong> EDA 3단계에서 발견한 '담사', '손님' 및 '고객:', '상담사:' 같은 화자 태그를 정규표현식으로 모두 제거하여 순수 텍스트만 남깁니다.
              </li>
              <li>
                <strong class="text-gray-900">Truncation (잘라내기):</strong> EDA 2단계에서 확인한 99% 지점(약 2,318자)과 모델 한계(2048 토큰)를 고려하여 `MAX_INPUT_LENGTH=2048`로 설정하고, 이보다 긴 데이터는 앞부분을 잘라냅니다 (`truncation=True`).
              </li>
            </ul>
          </div>
        </section>
      </main>
    </div>

    <script>
      // Helper function for wrapping long labels in Chart.js
      function wrapLabels(label, maxWidth) {
        const words = label.split(" ");
        const lines = [];
        let currentLine = "";
        words.forEach((word) => {
          if ((currentLine + word).length > maxWidth) {
            lines.push(currentLine);
            currentLine = word;
          } else {
            currentLine += " " + word;
          }
        });
        lines.push(currentLine.trim());
        return lines.map((l) => l.trim());
      }

      // Chart.js Global Config
      Chart.defaults.font.family = "'Inter', 'Noto Sans KR', sans-serif";
      Chart.defaults.font.weight = "500";
      Chart.defaults.color = "#374151"; // text-gray-700
      Chart.defaults.plugins.tooltip.backgroundColor = "#1f2937"; // bg-gray-800
      Chart.defaults.plugins.tooltip.titleFont.size = 14;
      Chart.defaults.plugins.tooltip.bodyFont.size = 12;
      Chart.defaults.plugins.tooltip.padding = 10;
      Chart.defaults.plugins.tooltip.cornerRadius = 4;

      // All Chart instances
      let charts = {};

      // Data for charts (UPDATED based on private data EDA)
      const chartRawData = {
        scale: {
          labels: ["분류 (Class)", "요약 (Summary)", "질의응답 (Q&A)"],
          data: [48877, 31957, 25132], //
          colors: ["#3b82f6", "#14b8a6", "#6366f1"],
        },
        source: {
          // (Approximated)
          labels: ["하나카드", "엘지유플러스", "액티벤처"],
          data: [5800, 3200, 700], // Approx. sum = 9700
          colors: ["#4f46e5", "#3b82f6", "#60a5fa"],
        },
        category: {
          // (Approximated Top 10)
          labels: ["선결제/즉시출금", "이용내역 안내", "요금 안내", "요금 납부", "요금제 변경", "상품예약 및 결제", "도난/분실", "한도상향", "선택약정", "요금 및 견적"],
          data: [750, 700, 680, 500, 480, 450, 400, 350, 340, 330], // Approx.
          colors: ["#4f46e5", "#6366f1", "#818cf8", "#a5b4fc", "#c7d2fe"],
        },
        turns: {
          // Approximated from histogram
          labels: ["0-10", "10-20", "20-30", "30-40", "40-50", "50-60", "60-70", "70+"],
          data: [100, 500, 1800, 2800, 2300, 1500, 500, 200], // Approx.
          colors: ["#6366f1"],
        },
        length: {
          // Approximated from histogram
          labels: ["<500", "500-1000", "1000-1500", "1500-2000", "2000-2500", "2500+"],
          data: [100, 2000, 4000, 2500, 800, 300], // Approx.
          colors: ["#6366f1"],
        },
        qaType: {
          labels: ["생성형 (Abstractive)", "추출형 (Extractive)"],
          data: [69.0, 31.0], // Corrected percentage based on private data
          colors: ["#ef4444", "#6b7280"],
        },
        class: {
          // From private data report text Top 10
          labels: ["민원인", "단일 요건 민원", "만족", "업무 처리 상담", "일반 문의 상담", "주문/결제/입금확인", "상품 및 서비스 일반", "다수 요건 민원", "회원 관리", "취소/반품/교환/환불/AS"],
          data: [9422, 8183, 7984, 4919, 4833, 3047, 2824, 1590, 1331, 1252],
          colors: ["#4f46e5", "#6366f1", "#818cf8", "#a5b4fc", "#c7d2fe"],
        },
        summary: {
          // Approximated from stats (mean 143, 99% 416)
          labels: ["0-50", "50-100", "100-150", "150-200", "200-250", "250-300", "300-400", "400+"],
          data: [500, 6000, 9000, 7000, 4000, 2000, 1500, 500], // Approx. total ~30k
          colors: ["#6366f1"],
        },
      };

      // Initialize Charts
      document.addEventListener("DOMContentLoaded", () => {
        initChart("chartDataScale", "doughnut", chartRawData.scale);
        initChart("chartDataSource", "bar", chartRawData.source, { indexAxis: "y", ticks: { font: { size: 10 } } });
        initChart("chartDataCategory", "bar", chartRawData.category, {
          ticks: { callback: (val, idx) => wrapLabels(chartRawData.category.labels[idx], 10) },
        });
        initChart("chartDataTurns", "bar", chartRawData.turns, { categoryPercentage: 1.0, barPercentage: 0.9 });
        initChart("chartDataLength", "bar", chartRawData.length, { categoryPercentage: 1.0, barPercentage: 0.9 });
        initChart("chartQAType", "pie", chartRawData.qaType, {
          plugins: {
            legend: { position: "bottom" },
            tooltip: { callbacks: { label: (ctx) => `${ctx.label}: ${ctx.raw.toFixed(1)}%` } }, // Ensure percentage format
          },
        });
        initChart("chartClass", "bar", chartRawData.class, {
          ticks: { callback: (val, idx) => wrapLabels(chartRawData.class.labels[idx], 10) },
        });
        initChart("chartSummary", "bar", chartRawData.summary, { categoryPercentage: 1.0, barPercentage: 0.9 });

        // Set initial active page
        showPage("home", document.querySelector('.nav-item[href="#home"]'));
      });

      function initChart(canvasId, type, data, extraOptions = {}) {
        const ctx = document.getElementById(canvasId);
        if (!ctx) return;

        const config = {
          type: type,
          data: {
            labels: data.labels,
            datasets: [
              {
                label: "데이터 건수",
                data: data.data,
                backgroundColor: data.colors,
                borderColor: "#ffffff",
                borderWidth: type === "doughnut" || type === "pie" ? 2 : 0,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: type === "bar",
                position: "bottom",
              },
              tooltip: {
                enabled: true,
              },
            },
            scales: {
              x: {
                display: type === "bar" && extraOptions.indexAxis !== "y",
                ticks: extraOptions.ticks || {},
              },
              y: {
                display: type === "bar",
                beginAtZero: true,
                ticks: extraOptions.indexAxis === "y" ? extraOptions.ticks : {},
              },
            },
            indexAxis: extraOptions.indexAxis || "x",
          },
        };

        // Merge extra options
        if (extraOptions.plugins) config.options.plugins = { ...config.options.plugins, ...extraOptions.plugins };

        charts[canvasId] = new Chart(ctx, config);
      }

      // Navigation Logic
      function showPage(pageId, clickedElement) {
        // Hide all pages
        document.querySelectorAll(".page-content").forEach((page) => {
          page.classList.add("hidden");
        });
        // Show target page
        const targetPage = document.getElementById("page-" + pageId);
        if (targetPage) {
          targetPage.classList.remove("hidden");
        }
        // Update active nav item
        document.querySelectorAll(".nav-item").forEach((item) => {
          item.classList.remove("active");
        });
        if (clickedElement) {
          clickedElement.classList.add("active");
        }
      }
    </script>
  </body>
</html>
